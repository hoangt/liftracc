<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>libliftracc: Installation</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.2 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<h1>Installation </h1>  </div>
</div>
<div class="contents">
<p>This page describes the installation process of the liftracc library. The build environment used on the testsystem and how it was set up to compile the libraray is shown.</p>
<p>If you receive errors on your testsystem feel free to post your errorlog to <a href="mailto:niekma@upb.de">niekma@upb.de</a>.</p>
<h2><a class="anchor" id="pre_sec"></a>
Prerequirements</h2>
<ul>
<li>C/C++/Fortran compiler</li>
<li>cmake</li>
<li>netlib.org blas+cblas library</li>
<li>python (for the generator scripts)</li>
</ul>
<h2><a class="anchor" id="opt_sec"></a>
Optional</h2>
<ul>
<li>additional BLAS libraries (Goto2, ATLAS, ...)</li>
<li>hardware accelerated versions of BLAS (cuda, clearspeed, ...)</li>
</ul>
<h2><a class="anchor" id="comp_sec"></a>
Compiler environment</h2>
<ul>
<li>gcc-4.5.1 local installation in $HOME directory</li>
<li>add $HOME/lib and $HOME/lib64 to $LD_LIBRARY_PATH (e.g. in ~/.bashrc: export $LD_LIBRARY_PATH=$HOME/lib:$HOME/lib64)</li>
<li>compiling gcc-4.5.1:<ul>
<li>used libraries: gmp-4.3.2, mpfr-3.0.0, mpc-0.8.2</li>
<li>compiling gmp-4.3.2:<ul>
<li>./configure –prefix=$HOME</li>
<li>make</li>
<li>make install</li>
</ul>
</li>
<li>compiling mpfr-3.0.0:<ul>
<li>./configure --prefix=$HOME –with-gmp=$HOME</li>
<li>make</li>
<li>make install</li>
</ul>
</li>
<li>compiling mpc-0.8.2:<ul>
<li>./configure --prefix=$HOME –with-gmp=$HOME</li>
<li>make</li>
<li>make install</li>
</ul>
</li>
<li>compiling gcc-4.5.1:<ul>
<li>./configure --prefix=$HOME --with-gmp=$HOME --with-mpfr=$HOME –with-mpc=$HOME</li>
<li>make</li>
<li>make install</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="comp_libs"></a>
Compiling/installing supported sublibraries</h2>
<ul>
<li>Have a look at <b>liftracc/blas_libs</b> directory. There are bash scripts that should fulfill the task of compiling and setting up the sublibraries.</li>
<li>In order to install all sublibs just call <b>./get_all_libs.sh</b> in that directory.</li>
<li>Details on how to build the sublibraries is presented in the following subsections.</li>
<li><b style="color:#C40000">Attention!!!</b> After a successful building process it is necessary to set up some environment variables. As an example have a look at <b>liftracc/library/example_bashrc</b>.</li>
</ul>
<h3><a class="anchor" id="comp_blas_sec"></a>
BLAS/CBLAS</h3>
<ul>
<li>It is necessary to patch the BLAS and CBLAS library to get a propper build. The used patches can be found in <b>liftracc/common/patches</b>.</li>
<li>The cblas library has to be present in two versions. The purpose of the first one is to provide the usual cblas function interface. The purpose of the second one is to provide the internal function interface used inside liftracc. This is necessary to solve a calling conflict caused by the shared library interposing mechanism.</li>
<li><b>blas.patch</b> performs changes to the blas Makefile script. The compiler and the compiling options are changed to 'gfortran -O3 -fPIC' and a make Rule is added to build libblas as shared library.</li>
<li><b>cblas_*.patch</b> several patches exist for the cblas library. One is for the Makefile in order to set needed parameters for the compilation process. One does the function renaming and one applies the changes needed to build the internal version of the cblas library.</li>
</ul>
<h3><a class="anchor" id="comp_atlas_sec"></a>
Atlas</h3>
<ul>
<li>The atlas library is configured with the options shown in <b>liftracc/blas_libs/get_atlas.sh</b>. If you can become root on you testsystem do not use the flags '-Si cputhrchk 0' instead use a tool like 'cpufreq-selector -g performance' to disable the CPU throttling. For further information have a look in the INSTALL.txt shipped with the ATLAS library.</li>
</ul>
<h3><a class="anchor" id="comp_goto2_sec"></a>
Goto2</h3>
<ul>
<li>There is a patch in <b>liftracc/common/patches</b> that does minor changes to the file 'GotoBLAS2/driver/others/dynamic.c'. Compiling the library on 64bit architektures will run into errors without it.</li>
</ul>
<h3><a class="anchor" id="comp_clear_sec"></a>
Clearspeed</h3>
<ul>
<li>Use the normal clearspeed installation procedure to set up the clearspeed board. The clearspeed documention should give all the information you need to do this.</li>
<li>If the clearspeed board runs into errors while executing try to run 'csreset'. In case of the used testsystem this solved the problem.</li>
</ul>
<h3><a class="anchor" id="comp_cubla_sec"></a>
CUBLAS</h3>
<ul>
<li>Install nvidia display driver according to nvidia's install instructions.</li>
<li>Install cublas library according to nvidia's install instructions.</li>
</ul>
<h2><a class="anchor" id="comp_liftracc"></a>
Compiling liftracc</h2>
<ul>
<li>Install cmake at least version 2.6.4 (can be installed locally when build with: ./configure --prefix=$HOME;make;make install).</li>
<li>run './bootstrap.sh' in 'liftracc/library'.</li>
<li>change directory to 'build'</li>
<li>run 'ccmake .' to view/edit available options.</li>
<li>run 'make' to build the library.</li>
</ul>
<dl>
<dt><b>Next:</b></dt>
<dd><a class="el" href="usage.html">Usage</a></dd>
</dl>
<dl class="author"><dt><b>Author:</b></dt><dd>Manuel Niekamp &lt;<a href="mailto:niekma@upb.de">niekma@upb.de</a>&gt; </dd></dl>
<dl class="version"><dt><b>Version:</b></dt><dd>0.1 </dd></dl>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address class="footer"><small>Generated by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.2 </small></address>
</body>
</html>
